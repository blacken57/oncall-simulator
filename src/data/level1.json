{
  "id": "level-1",
  "name": "Standard Operations",
  "description": "Keep the checkout system healthy under normal load.",
  "components": [
    {
      "id": "checkout-server",
      "name": "Checkout Server",
      "type": "compute",
      "physics": {
        "request_capacity_per_unit": 20,
        "latency_base_ms": 50,
        "latency_load_factor": 0.2,
        "saturation_threshold_percent": 80,
        "saturation_penalty_factor": 0.1,
        "resource_base_usage": {
          "ram": 1.2
        },
        "consumption_rates": {
          "ram": 0.005
        },
        "noise_factor": 0.5,
        "status_thresholds": {
          "gcu_util": {
            "warning": 80,
            "critical": 95
          },
          "error_rate": {
            "warning": 1,
            "critical": 5
          }
        }
      },
      "attributes": {
        "ram": {
          "name": "Memory",
          "unit": "GB",
          "initialLimit": 8,
          "minLimit": 2,
          "maxLimit": 64,
          "costPerUnit": 10
        },
        "gcu": {
          "name": "GCU",
          "unit": "GCU",
          "initialLimit": 20,
          "minLimit": 1,
          "maxLimit": 32,
          "costPerUnit": 25
        }
      },
      "metrics": {
        "incoming": {
          "name": "Incoming Requests",
          "unit": "req/s"
        },
        "latency": {
          "name": "P99 Latency",
          "unit": "ms"
        },
        "error_rate": {
          "name": "Error Rate",
          "unit": "%"
        }
      },
      "traffic_routes": [
        {
          "name": "initiatePurchase",
          "outgoing_traffics": [
            {
              "name": "internal_db_queries",
              "multiplier": 2
            },
            {
              "name": "internal_log_writes",
              "multiplier": 3
            }
          ]
        },
        {
          "name": "commitPurchase",
          "outgoing_traffics": [
            {
              "name": "internal_db_queries",
              "multiplier": 1
            },
            {
              "name": "internal_log_writes",
              "multiplier": 2
            }
          ]
        }
      ]
    },
    {
      "id": "checkout-db",
      "name": "Checkout DB",
      "type": "database",
      "physics": {
        "request_capacity_per_unit": 1,
        "latency_base_ms": 10,
        "latency_load_factor": 0.2,
        "saturation_threshold_percent": 90,
        "saturation_penalty_factor": 4,
        "consumption_rates": {
          "storage": 0.0001
        },
        "noise_factor": 2,
        "status_thresholds": {
          "conn_util": {
            "warning": 80,
            "critical": 100
          },
          "error_rate": {
            "warning": 1,
            "critical": 5
          }
        }
      },
      "attributes": {
        "connections": {
          "name": "Max Connections",
          "unit": "count",
          "initialLimit": 100,
          "minLimit": 10,
          "maxLimit": 1000,
          "costPerUnit": 1
        },
        "storage": {
          "name": "Storage",
          "unit": "GB",
          "initialLimit": 500,
          "minLimit": 50,
          "maxLimit": 5000,
          "costPerUnit": 0.5
        }
      },
      "metrics": {
        "incoming": {
          "name": "Incoming Queries",
          "unit": "qps"
        },
        "query_latency": {
          "name": "Query Latency",
          "unit": "ms"
        },
        "error_rate": {
          "name": "Error Rate",
          "unit": "%"
        }
      },
      "traffic_routes": [
        {
          "name": "internal_db_queries",
          "outgoing_traffics": []
        }
      ]
    },
    {
      "id": "log-storage",
      "name": "Log Block Storage",
      "type": "storage",
      "physics": {
        "consumption_rates": {
          "storage_usage": 0.05
        },
        "saturation_threshold_percent": 100,
        "status_thresholds": {
          "storage_util": {
            "warning": 85,
            "critical": 100
          },
          "error_rate": {
            "warning": 1,
            "critical": 5
          }
        }
      },
      "attributes": {
        "storage_usage": {
          "name": "Storage Usage",
          "unit": "GB",
          "initialLimit": 1000,
          "minLimit": 100,
          "maxLimit": 10000,
          "costPerUnit": 0.1
        }
      },
      "metrics": {
        "incoming": {
          "name": "Incoming Writes",
          "unit": "req/s"
        },
        "fill_rate": {
          "name": "Fill Rate",
          "unit": "GB/s"
        },
        "error_rate": {
          "name": "Error Rate",
          "unit": "%"
        }
      },
      "traffic_routes": [
        {
          "name": "internal_log_writes",
          "outgoing_traffics": []
        }
      ]
    }
  ],
  "traffics": [
    {
      "type": "external",
      "name": "initiatePurchase",
      "target_component_name": "Checkout Server",
      "value": 60,
      "base_variance": 5
    },
    {
      "type": "external",
      "name": "commitPurchase",
      "target_component_name": "Checkout Server",
      "value": 40,
      "base_variance": 5
    },
    {
      "type": "internal",
      "name": "internal_db_queries",
      "target_component_name": "Checkout DB"
    },
    {
      "type": "internal",
      "name": "internal_log_writes",
      "target_component_name": "hLog Block Storage"
    }
  ],
  "statusEffects": [],
  "scheduledJobs": [
    {
      "name": "Hourly Log Rotation",
      "targetName": "Log Block Storage",
      "schedule": {
        "interval": 30
      },
      "affectedAttributes": [
        {
          "name": "storage_usage",
          "multiplier": -0.5
        }
      ],
      "emittedTraffic": []
    }
  ]
}
